<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- === PERUBAHAN SEO START === -->
    <title>Jasa Servis AC, Cuci & Perbaikan | Sejuk Teknik AC Jakarta & Depok</title>
    <!-- Tambahan Meta Description untuk SEO -->
    <meta name="description" content="Sejuk Teknik AC menyediakan jasa Servis AC, Cuci AC, dan Perbaikan AC profesional bergaransi untuk area Jakarta dan Depok. Teknisi berpengalaman, harga transparan.">
    <!-- === PERUBAHAN SEO END === -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <style>
      :root {
        --primary: #0066cc;
        --primary-light: #e6f2ff;
        --secondary: #ff7a00;
        --dark: #2d3748;
        --light: #f8fafc;
        --gray: #718096;
        --white: #ffffff;
        --coin: #ffd700;
        /* Tambahan: Variabel Success/Danger untuk status operasional */
        --success: #4caf50;
        --danger: #f44336;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Poppins", sans-serif;
        color: var(--dark);
        line-height: 1.6;
        background-color: var(--light);
      }
      header {
        background: linear-gradient(135deg, var(--primary), #004c99);
        color: var(--white);
        padding: 2rem 1rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        /* --- MODIFIKASI CSS UNTUK LOGO SEJAJAR H2 --- */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 L0,100 Z"></path></svg>');
        opacity: 0.1;
      }
      
      /* --- NEW CSS: Logo Header Styling --- */
      .header-title-container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 0.5rem;
      }
      
      .header-logo {
          /* Container untuk link/logo */
          display: inline-flex;
          margin-right: 15px;
          align-items: center; /* Pastikan gambar di tengah vertikal */
      }
      
      .header-logo img {
          height: 60px; /* Ukuran logo di Header */
          width: auto;
          border: none;
      }

      header h2 { /* Ganti dari h1 ke h2 */
        margin: 0;
        font-size: 2.5rem;
        font-weight: 700;
        position: relative;
        display: inline-block;
        animation: freezeEffect 6s infinite; /* Animasi untuk H2 */
        text-align: left; 
      }
      @keyframes freezeEffect {
        0%,
        100% {
          transform: scale(1);
          color: var(--white);
          text-shadow: none;
        }
        20% {
          transform: scale(1.05);
          color: #a0e7ff;
          text-shadow: 0 0 10px rgba(160, 231, 255, 0.7);
        }
        40% {
          transform: scale(1);
          color: #7fd8ff;
          text-shadow: 0 0 15px rgba(127, 216, 255, 0.8);
        }
        60% {
          transform: scale(0.98);
          color: #b3f0ff;
          text-shadow: 0 0 20px rgba(179, 240, 255, 0.9);
        }
        80% {
          transform: scale(1.02);
          color: #d9f7ff;
          text-shadow: 0 0 25px rgba(217, 247, 255, 1);
        }
      }
      header p {
        font-size: 1.1rem;
        margin-top: 0;
        opacity: 0.9;
        position: relative;
        text-align: center;
      }
      .rating-display {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 1rem;
      }
      .stars {
        display: flex;
        margin-right: 10px;
      }
      .star {
        color: #ddd;
        font-size: 1.5rem;
        margin-right: 2px;
        transition: color 0.3s;
      }
      .star.filled {
        color: #ffc107;
      }
      .rating-percentage {
        font-size: 1.2rem;
        font-weight: 600;
      }
      nav {
        background-color: var(--white);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }
      .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
      }
      .logo {
        font-weight: 700;
        color: var(--primary);
        font-size: 1.2rem;
        text-decoration: none;
      }
      .nav-links {
        display: flex;
        gap: 1.5rem;
      }
      nav a {
        color: var(--dark);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        position: relative;
        white-space: nowrap; /* Penting untuk navigasi kompak */
      }
      nav a:hover {
        color: var(--primary);
      }
      nav a::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -5px;
        left: 0;
        background-color: var(--primary);
        transition: width 0.3s ease;
      }
      nav a:hover::after {
        width: 100%;
      }
      
      /* === NEW STYLE: AUTH INFO & BUTTONS === */
      .auth-buttons {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .auth-btn {
        padding: 8px 16px;
        border-radius: 50px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        white-space: nowrap; /* Mencegah teks terpotong */
      }
      .login-btn {
        background-color: transparent;
        color: var(--primary);
        border: 2px solid var(--primary);
      }
      .login-btn:hover {
        background-color: var(--primary);
        color: white;
      }
      .signup-btn {
        background-color: var(--primary);
        color: white;
      }
      .signup-btn:hover {
        background-color: #0052a3;
      }
      .profile-info {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      .user-details-link {
        color: var(--dark);
        text-decoration: none;
        font-size: 0.95rem;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        transition: color 0.3s;
      }
      .user-details-link:hover {
        color: var(--primary);
      }
      .user-details-text {
        display: flex;
        flex-direction: column;
        line-height: 1.2;
      }
      .user-name {
        font-weight: 600;
        color: var(--primary);
      }
      .user-phone {
        font-size: 0.8rem;
        color: var(--gray);
      }
      
      /* === NEW STYLE: USER INFO TOP RIGHT === */
      .user-info-top {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        background-color: rgba(255, 255, 255, 0.9);
        padding: 8px 15px;
        border-radius: 50px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 50;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .user-info-top:hover {
        background-color: rgba(255, 255, 255, 1);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transform: translateY(-2px);
      }
      .user-info-top .user-name {
        font-weight: 600;
        color: var(--primary);
        margin-right: 5px;
      }
      .user-info-top .user-uid {
        font-size: 0.8rem;
        color: var(--gray);
      }
      .notification-btn {
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: relative;
        transition: all 0.3s ease;
      }
      .notification-btn:hover {
        background-color: #0052a3;
        transform: scale(1.05);
      }
      .notification-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ff5252;
        color: white;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        font-weight: bold;
        /* Start hidden/empty */
        display: none;
      }
      
      /* === END NEW STYLE === */
      .hero {
        background: linear-gradient(145deg, var(--primary), #0088ff);
        color: var(--white);
        text-align: center;
        padding: 4rem 1rem;
        position: relative;
        overflow: hidden;
      }
      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 L0,100 Z"></path></svg>');
        opacity: 0.1;
      }
      .hero::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        animation: shine 3s infinite;
      }
      @keyframes shine {
        0% {
          left: -100%;
        }
        20%,
        100% {
          left: 100%;
        }
      }
      .hero-content {
        max-width: 800px;
        margin: 0 auto;
        position: relative;
        z-index: 1;
      }
      .hero h1 {
        font-size: 2.2rem;
        margin-bottom: 1rem;
        font-weight: 600;
      }
      .hero p {
        font-size: 1.1rem;
        margin-bottom: 2rem;
        opacity: 0.9;
      }
      .visi-misi {
        background-color: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(5px);
        padding: 1.5rem;
        border-radius: 12px;
        margin-top: 1.5rem;
      }
      .visi-misi p {
        font-size: 1rem;
        line-height: 1.7;
      }
      .content {
        padding: 4rem 1rem;
        max-width: 1200px;
        margin: 0 auto;
      }
      .section-title {
        text-align: center;
        margin-bottom: 3rem;
      }
      .section-title h2 {
        font-size: 2rem;
        color: var(--primary);
        margin-bottom: 1rem;
        position: relative;
        display: inline-block;
      }
      .section-title h2::after {
        content: "";
        position: absolute;
        width: 50%;
        height: 3px;
        bottom: -10px;
        left: 25%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
      }
      .section-title p {
        color: var(--gray);
        max-width: 700px;
        margin: 0 auto;
      }
      .cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
      }
      .card {
        background: var(--white);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        opacity: 0;
        transform: translateY(30px);
        position: relative; /* Penting untuk disable overlay */
      }
      .card.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }
      /* NEW: Disable Overlay Style */
      .card.disabled {
        pointer-events: none;
        opacity: 0.6;
        filter: grayscale(100%);
      }
      .card.disabled::after {
        content: "Login untuk Memesan";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        background: rgba(255, 255, 255, 0.7);
        color: var(--primary);
        font-weight: 700;
        font-size: 1.2rem;
        z-index: 5;
        cursor: not-allowed;
      }
      .card-icon {
        background-color: var(--primary-light);
        color: var(--primary);
        font-size: 2rem;
        padding: 1.5rem;
        text-align: center;
      }
      .card-content {
        padding: 1.5rem;
      }
      .card h3 {
        margin-bottom: 1rem;
        color: var(--primary);
        font-size: 1.3rem;
      }
      .card p {
        color: var(--gray);
        font-size: 0.95rem;
      }
      .btn {
        display: inline-block;
        background-color: var(--primary);
        color: var(--white);
        padding: 0.8rem 1.8rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        box-shadow: 0 4px 10px rgba(0, 102, 204, 0.3);
        border: 2px solid var(--primary);
      }
      .btn:hover {
        background-color: transparent;
        color: var(--primary);
        box-shadow: none;
      }
      .btn-whatsapp {
        background-color: #25d366;
        border-color: #25d366;
        box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3);
      }
      .btn-whatsapp:hover {
        color: #25d366;
      }
      /* Footer Styles */
      .footer {
        background-color: var(--dark);
        color: var(--white);
        padding: 3rem 0 0;
      }
      .footer-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
      }
      .footer-about {
        margin-bottom: 2rem;
      }
      .footer-logo {
        display: flex;
        align-items: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--white);
      }
      .footer-logo i {
        margin-right: 0.5rem;
        font-size: 1.8rem;
      }
      .footer-about p {
        opacity: 0.8;
        font-size: 0.9rem;
      }
      .footer-links h3 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        position: relative;
        padding-bottom: 0.5rem;
      }
      .footer-links h3::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        width: 50px;
        height: 2px;
        background: var(--primary);
      }
      .footer-links ul {
        list-style: none;
      }
      .footer-links li {
        margin-bottom: 0.8rem;
      }
      .footer-links a {
        color: var(--white);
        opacity: 0.8;
        text-decoration: none;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
      }
      .footer-links a:hover {
        opacity: 1;
        padding-left: 5px;
      }
      .footer-links a i {
        margin-right: 0.5rem;
        width: 20px;
        text-align: center;
      }
      .footer-contact p {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        opacity: 0.8;
        font-size: 0.9rem;
      }
      .footer-contact i {
        margin-right: 0.8rem;
        width: 20px;
        text-align: center;
      }
      .footer-bottom {
        text-align: center;
        padding: 1.5rem;
        background-color: rgba(0, 0, 0, 0.2);
        margin-top: 2rem;
        font-size: 0.9rem;
        opacity: 0.8;
      }
      /* New Styles for Added Features */
      /* HAPUS: Promo Banner Styles */
      /* .promo-banner {
        ...
      } */
      .calculator {
        background: var(--white);
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin: 2rem auto;
        max-width: 600px;
      }
      .calculator h3 {
        color: var(--primary);
        margin-bottom: 1.5rem;
        text-align: center;
      }
      .form-group {
        margin-bottom: 1.5rem;
      }
      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }
      .form-group select,
      .form-group input {
        width: 100%;
        padding: 0.8rem;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-family: "Poppins", sans-serif;
      }
      .result {
        background: var(--primary-light);
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1.5rem;
        text-align: center;
        font-weight: 600;
        color: var(--primary);
        display: none;
      }
      .testimonials {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
        transition: opacity 0.5s ease-in-out; /* Animasi untuk pergantian testimonial */
      }
      .testimonial {
        background: var(--white);
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        position: relative;
        transition: opacity 0.5s ease-in-out; 
      }
      .testimonial::before {
        content: '"';
        font-size: 4rem;
        color: var(--primary-light);
        position: absolute;
        top: 0;
        left: 1rem;
        line-height: 1;
      }
      .testimonial p {
        font-style: italic;
        margin-bottom: 1rem;
        position: relative;
        z-index: 1;
      }
      .testimonial .author {
        font-weight: 600;
        color: var(--primary);
      }
      .service-highlights {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
      }
      .service-card {
        background: var(--white);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        text-align: center;
        transition: transform 0.3s ease;
      }
      .service-card:hover {
        transform: translateY(-10px);
      }
      .service-icon {
        background: var(--primary);
        color: white;
        font-size: 2.5rem;
        padding: 1.5rem;
      }
      .service-content {
        padding: 1.5rem;
      }
      .service-content h3 {
        color: var(--primary);
        margin-bottom: 1rem;
      }
      .service-content p {
        color: var(--gray);
        font-size: 0.95rem;
      }
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
      }
      .stat-item {
        text-align: center;
        padding: 1.5rem;
        background: var(--white);
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }
      .stat-icon {
        font-size: 2.5rem;
        color: var(--primary);
        margin-bottom: 1rem;
      }
      .stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 0.5rem;
      }
      .stat-label {
        color: var(--gray);
        font-size: 0.9rem;
      }
      .map-container {
        height: 300px;
        margin: 3rem 0;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      .blog-posts {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
      }
      .blog-card {
        background: var(--white);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }
      .blog-image {
        height: 200px;
        background: var(--primary-light);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-size: 3rem;
      }
      .blog-content {
        padding: 1.5rem;
      }
      .blog-content h3 {
        color: var(--primary);
        margin-bottom: 1rem;
      }
      .blog-content p {
        color: var(--gray);
        margin-bottom: 1.5rem;
        font-size: 0.9rem;
      }
      .payment-methods {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        margin: 2rem 0;
      }
      .payment-method {
        background: var(--white);
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-weight: 500;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }
      .certificates {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        margin: 2rem 0;
      }
      .certificate {
        background: var(--white);
        padding: 1rem;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        width: 150px;
      }
      .certificate i {
        font-size: 2rem;
        color: var(--primary);
        margin-bottom: 0.5rem;
      }
      .diagnosis {
        background: var(--white);
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin: 2rem 0;
      }
      .diagnosis-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      .diagnosis-option {
        background: var(--primary-light);
        padding: 1rem;
        border-radius: 8px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .diagnosis-option:hover {
        background: var(--primary);
        color: white;
      }
      .diagnosis-result {
        background: var(--primary-light);
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1.5rem;
        display: none;
      }
      .security-banner {
        background: var(--primary-light);
        padding: 1rem;
        border-radius: 8px;
        text-align: center;
        margin: 2rem 0;
      }
      .language-switcher {
        position: absolute;
        top: 1rem;
        right: 1rem;
      }
      .language-btn {
        background: transparent;
        border: none;
        font-size: 1.2rem;
        cursor: pointer;
        padding: 0.5rem;
      }
      /* Modal styles for blog posts */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }
      .modal-content {
        background-color: #fefefe;
        margin: 10% auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 700px;
        width: 80%;
        position: relative;
        animation: modalSlideUp 0.4s ease-out;
      }
      @keyframes modalSlideUp {
        from {
          transform: translateY(50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      .close-btn {
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 28px;
        font-weight: bold;
        color: #aaa;
        cursor: pointer;
      }
      .close-btn:hover {
        color: #333;
      }
      /* Auth Modal Styles */
      .auth-modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }
      .auth-modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 500px;
        width: 90%;
        position: relative;
        animation: modalSlideUp 0.4s ease-out;
      }
      .auth-step {
        display: none;
      }
      .auth-step.active {
        display: block;
      }
      .step-indicator {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
      }
      .step {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: #ddd;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 10px;
        font-weight: bold;
      }
      .step.active {
        background-color: var(--primary);
        color: white;
      }
      .step.completed {
        background-color: #4caf50;
        color: white;
      }
      .google-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background-color: #4285f4;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 500;
        width: 100%;
        margin-bottom: 15px;
      }
      .google-btn:hover {
        background-color: #357ae8;
      }
      .divider {
        display: flex;
        align-items: center;
        margin: 15px 0;
      }
      .divider-line {
        flex-grow: 1;
        height: 1px;
        background-color: #ddd;
      }
      .divider-text {
        padding: 0 10px;
        color: #777;
      }
      .password-container {
        position: relative;
      }
      .password-toggle {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        color: #777;
      }
      .file-upload {
        position: relative;
        display: inline-block;
        cursor: pointer;
        width: 100%;
      }
      .file-upload input[type="file"] {
        position: absolute;
        opacity: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }
      .file-upload-label {
        display: block;
        padding: 10px;
        background-color: #f1f1f1;
        border: 1px dashed #ddd;
        border-radius: 5px;
        text-align: center;
        color: #777;
      }
      
      /* === NEW STYLE: CONFIRMATION MODAL === */
      .confirm-account-modal {
        display: none;
        position: fixed;
        z-index: 3000; /* Lebih tinggi dari modal auth */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
      }
      .confirm-account-content {
        background-color: #fefefe;
        padding: 30px;
        border-radius: 10px;
        max-width: 500px;
        width: 90%;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }
      .confirm-account-content h3 {
        color: var(--primary);
        margin-bottom: 20px;
      }
      .confirm-details {
        text-align: left;
        margin-bottom: 20px;
        padding: 15px;
        background-color: var(--primary-light);
        border-radius: 8px;
        font-size: 0.95rem;
      }
      .confirm-details p {
        margin: 5px 0;
      }
      .confirm-account-buttons {
        display: flex;
        justify-content: space-around;
        gap: 15px;
      }
      .confirm-account-btn {
        padding: 10px 20px;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        width: 50%;
      }
      .confirm-yes-btn {
        background-color: #4caf50;
        color: white;
      }
      .confirm-no-btn {
        background-color: #f44336;
        color: white;
      }
      
      /* --- NEW STYLE: Event Modal Position Fix --- */
      .event-modal {
        display: none;
        position: fixed;
        z-index: 5000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.6);
        justify-content: center;
        align-items: center;
      }

      .event-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 400px;
        width: 90%;
        position: relative;
        animation: modalSlideUp 0.4s ease-out;
        text-align: center;
        color: var(--dark) !important; /* Pastikan teks modal event terlihat */
      }
      
      .event-header {
          font-size: 1.5rem;
          font-weight: 600;
          margin-bottom: 15px;
          color: var(--dark);
      }
      
      .event-message {
          margin-bottom: 20px;
      }

      .event-close-btn { /* Tombol "Oke, Mengerti" yang dipindah */
        background-color: var(--primary);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 50px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        margin-bottom: 10px; /* Space before dismiss button */
      }
      
      .event-dismiss-btn {
        background: none;
        border: none;
        color: var(--gray);
        font-size: 0.85rem;
        cursor: pointer;
      }
      
      .event-footer {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 10px;
        border-top: 1px solid #eee;
      }


      /* Loading Screen Styles */
      .loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        color: white;
        backdrop-filter: blur(5px);
      }
      .loading-text {
        font-size: 1.8rem;
        margin-bottom: 2rem;
        text-align: center;
      }
      .loading-spinner {
        width: 60px;
        height: 60px;
        border: 6px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: var(--primary);
        animation: spin 1s ease-in-out infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Success Animation Styles */
      .success-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: none; /* Ubah kembali ke none */
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        color: white;
        backdrop-filter: blur(5px);
      }
      .success-text {
        font-size: 2rem;
        margin-bottom: 2rem;
        text-align: center;
        animation: fadeInScale 0.8s ease-out;
      }
      .success-button {
        background-color: var(--primary);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 50px;
        font-size: 1.2rem;
        cursor: pointer;
        animation: fadeInScale 1s ease-out 0.5s both;
      }
      @keyframes fadeInScale {
        from {
          opacity: 0;
          transform: scale(0.8);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* Particle Animation */
      .particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
      }
      .particle {
        position: absolute;
        background-color: var(--primary);
        border-radius: 50%;
        pointer-events: none;
        opacity: 0;
        animation: float-up 3s ease-out forwards;
      }
      @keyframes float-up {
        0% {
          opacity: 0;
          transform: translateY(0) scale(0);
        }
        20% {
          opacity: 1;
          transform: translateY(-20px) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(-100px) scale(0.5);
        }
      }

      /* SJCoin Display */
      .sjcoin-display {
        position: absolute;
        top: 20px;
        left: 20px;
        background-color: var(--coin);
        color: var(--dark);
        padding: 8px 15px;
        border-radius: 50px;
        font-weight: 600;
        display: none;
        align-items: center;
        box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3);
        z-index: 50;
      }
      .sjcoin-display i {
        margin-right: 5px;
      }

      /* Confirmation Modal */
      .confirm-modal {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }
      .confirm-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 400px;
        width: 90%;
        position: relative;
        animation: modalSlideUp 0.4s ease-out;
        text-align: center;
      }
      .confirm-title {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: var(--primary);
      }
      .confirm-message {
        margin-bottom: 1.5rem;
        color: var(--dark);
      }
      .confirm-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
      }
      .confirm-btn {
        padding: 10px 20px;
        border-radius: 50px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
      }
      .confirm-yes {
        background-color: var(--primary);
        color: white;
      }
      .confirm-no {
        background-color: transparent;
        color: var(--primary);
        border: 2px solid var(--primary);
      }

      /* Generic Alert Modal */
      .generic-alert-modal {
        display: none;
        position: fixed;
        z-index: 3001;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
        justify-content: center;
        align-items: center;
      }
      .generic-alert-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 400px;
        width: 90%;
        position: relative;
        animation: modalSlideUp 0.4s ease-out;
        text-align: center;
      }
      .generic-alert-title {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: var(--primary);
      }
      .generic-alert-message {
        margin-bottom: 1.5rem;
        color: var(--dark);
      }
      .generic-alert-buttons {
        display: flex;
        justify-content: center;
      }
      .generic-alert-btn {
        padding: 10px 20px;
        border-radius: 50px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        background-color: var(--primary);
        color: white;
      }
      
      /* --- NEW STYLE: Hamburger and Mobile Menu --- */
      .hamburger {
        display: none; /* Hidden on desktop */
        width: 40px;
        height: 40px;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        position: relative;
        z-index: 150;
      }
      .hamburger .bar {
        display: block;
        width: 25px;
        height: 3px;
        margin: 5px auto;
        background-color: var(--primary);
        transition: all 0.3s ease-in-out;
      }

      /* Mobile menu container (off-canvas) */
      .mobile-menu {
        position: fixed;
        top: 0;
        right: 0;
        width: 280px; /* Lebar sidebar */
        height: 100%;
        background-color: var(--white);
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        transform: translateX(100%); /* Start off-screen */
        transition: transform 0.3s ease-in-out;
        z-index: 1000;
        display: flex;
        flex-direction: column;
      }

      .mobile-menu.open {
        transform: translateX(0);
      }

      .mobile-menu-header {
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--primary-light);
      }

      .close-btn-mobile {
        font-size: 2rem;
        line-height: 1;
        border: none;
        background: none;
        cursor: pointer;
        color: var(--dark);
      }

      .mobile-menu-links {
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 10px;
        overflow-y: auto;
      }

      .mobile-menu-links a {
        padding: 10px 0;
        color: var(--dark);
        text-decoration: none;
        font-weight: 500;
        font-size: 1rem;
        transition: color 0.3s;
        border-bottom: 1px solid #f1f1f1;
        display: flex;
        align-items: center;
      }
      .mobile-menu-links a:last-child {
        border-bottom: none;
      }

      .mobile-menu-links a i {
          margin-right: 10px;
          color: var(--primary);
      }

      .mobile-menu-links a:hover {
        color: var(--primary);
      }
      
      .mobile-menu-links hr {
          border: 0;
          height: 1px;
          background-color: #ddd;
          margin: 10px 0;
      }

      /* Hamburger animation (X icon) */
      .hamburger.is-active .bar:nth-child(2) {
        opacity: 0;
      }
      .hamburger.is-active .bar:nth-child(1) {
        transform: translateY(8px) rotate(45deg);
      }
      .hamburger.is-active .bar:nth-child(3) {
        transform: translateY(-8px) rotate(-45deg);
      }
      
      /* Mobile-Specific Styles (max-width: 992px for tablet/mobile) */
      @media (max-width: 992px) {
        /* Make navbar layout for mobile */
        .nav-container {
          flex-direction: row; /* Keep elements in a row */
          justify-content: space-between;
          align-items: center;
          padding: 1rem;
        }
        
        /* Show Hamburger */
        .hamburger {
          display: block;
        }
        
        /* Arrange Logo, Links, Buttons horizontally */
        .logo {
            order: 1;
        }
        .nav-links {
          display: flex; 
          gap: 0.8rem;
          align-items: center;
          justify-content: flex-start;
          flex-grow: 1;
          order: 2; /* Put links in the middle */
          margin-left: 1rem; /* Space between logo and links */
        }
        .auth-buttons {
            display: none; /* Hide desktop auth buttons */
            order: 3;
        }
        
        /* Only show 3 main links in the main nav on mobile (1, 2, 7) */
        /* Beranda, Layanan, Rating & Ulasan */
        .nav-links a {
            display: none; /* Hide all links initially */
            font-size: 0.85rem;
            padding: 5px;
            text-align: center;
        }
        /* Tampilkan Beranda (1), Layanan (2), Rating & Ulasan (7) */
        .nav-links a:nth-child(1), 
        .nav-links a:nth-child(2), 
        .nav-links a:nth-child(7) { 
            display: inline-block; 
        }
        
        .nav-links a i {
            display: none; /* Hide icons in the compact nav-links for clean look */
        }
        
        /* Adjust existing mobile styles */
        .hero h1 {
          font-size: 1.8rem;
        }
        .cards {
          grid-template-columns: 1fr;
        }
        .language-switcher {
          position: static;
          text-align: center;
          margin-top: 1rem;
        }
        .modal-content {
          width: 95%;
          margin: 20% auto;
        }
        .auth-modal-content {
          width: 95%;
          margin: 10% auto;
        }
        .sjcoin-display {
          top: 10px;
          left: 10px;
          padding: 5px 10px;
          font-size: 0.9rem;
        }
        .user-info-top {
          position: static;
          margin-bottom: 10px;
          justify-content: center;
        }
        /* Style untuk status bar tetap di posisi yang baik di mobile */
        .fixed-status-bar {
            left: 10px !important;
            top: 60px !important; 
        }
        /* Penyesuaian Logo Header di Mobile */
        .header-logo {
            margin-right: 10px;
        }
        .header-logo img {
            height: 40px; 
        }
        header h2 {
            font-size: 2rem;
        }
      }
      
      /* Ensure mobile menu auth buttons are block level */
      .auth-buttons-mobile {
          display: flex;
          flex-direction: column;
          gap: 10px;
          padding: 0 1rem;
      }
      .auth-buttons-mobile .auth-btn {
          width: 100%;
          text-align: center;
      }

      /* Clear desktop-only for a cleaner mobile implementation */
      .desktop-only {
        display: none !important;
      }
      @media (min-width: 993px) {
        .nav-links .desktop-link {
          display: flex !important; /* Force display for desktop-only links on desktop */
        }
      }
      
      /* --- KOREKSI STATUS BAR POSITION --- */
      .fixed-status-bar {
          position: absolute; 
          top: 60px; 
          left: 20px;
          z-index: 49; 
          padding: 5px 10px;
          border-radius: 8px;
          font-size: 0.9rem;
          font-weight: 600;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
          white-space: nowrap;
          display: flex; 
          align-items: center;
          gap: 10px;
          /* TAMBAHAN: Default background/color agar tidak kosong saat JS loading */
          background-color: var(--gray);
          color: var(--white);
      }
      
      /* === NEW STYLE: STATUS COLORS (MODIFIED) === */

      /* Status Hijau: Layanan Buka & Siaga */
      .fixed-status-bar.status-green {
          background-color: var(--success); /* Menggunakan variabel --success */
          color: var(--white);
      }

      .fixed-status-bar.status-green .employee-status-fixed {
          border-left: 1px solid rgba(255, 255, 255, 0.5); /* Garis pemisah putih samar */
          padding-left: 10px;
          color: var(--white);
      }
      .fixed-status-bar.status-green .status-icon {
          color: var(--white);
      }

      /* Status Kuning: Layanan Buka Tapi Tidak Siaga/Tersedia (e.g. Istirahat/Sibuk) */
      .fixed-status-bar.status-yellow {
          background-color: #ffc107; /* Warna Kuning / Amber */
          color: var(--dark);
      }

      .fixed-status-bar.status-yellow .status-icon {
          color: var(--dark);
      }

      .fixed-status-bar.status-yellow .employee-status-fixed {
          border-left: 1px solid rgba(0, 0, 0, 0.2); /* Garis pemisah hitam samar */
          padding-left: 10px;
          color: var(--dark);
      }

      /* Status Merah: Layanan Tutup */
      .fixed-status-bar.status-red {
          background-color: var(--danger); /* Menggunakan variabel --danger */
          color: var(--white);
      }

      .fixed-status-bar.status-red .employee-status-fixed {
          border-left: 1px solid rgba(255, 255, 255, 0.5); /* Garis pemisah putih samar */
          padding-left: 10px;
          color: var(--white);
      }
      .fixed-status-bar.status-red .status-icon {
          color: var(--white);
      }

      /* Reset/Generic style for the employee status text */
      .employee-status-fixed {
          font-size: 0.9em;
          /* Reset properties that will be controlled by color classes */
          padding-left: 0;
          border-left: none;
      }
    </style>
  </head>
  <body>
    <!-- Event Pop-up Modal (NEW: Sinkronisasi Admin Panel) -->
    <div class="event-modal" id="eventModal">
      <div class="event-content" id="eventModalContent">
        <!-- TOMBOL CLOSE PINDAH KE ATAS -->
        <button class="event-close-btn" id="eventCloseBtn">Oke, Mengerti</button> 
        
        <div class="event-header" id="eventTitleModal"></div>
        <p class="event-message" id="eventMessageModal"></p>
        
        <div class="event-footer">
          <!-- Tombol close lama dihilangkan dari footer -->
          <button class="event-dismiss-btn" id="eventDismissBtn" style="display: none;">
            <i class="fas fa-eye-slash"></i> Jangan tampilkan lagi
          </button>
        </div>
      </div>
    </div>

    <!-- User Info Top Right (hidden by default) -->
    <div class="user-info-top" id="userInfoTop" style="display: none;">
      <div class="user-details-text">
        <span class="user-name" id="userNameTop"></span>
        <span class="user-uid" id="userUidTop"></span>
      </div>
      <a href="inbox.html" class="notification-btn" id="inboxButtonTop">
        <i class="fas fa-inbox"></i>
        <span class="notification-badge" id="notificationBadgeTop"></span>
      </a>
    </div>

    <!-- SJCoin Display (hidden by default) -->
    <div class="sjcoin-display" id="sjcoinDisplay">
      <i class="fas fa-coins"></i>
      <span id="sjcoinAmount">0</span> SJCoin
    </div>

    <!-- Fixed Service Status Bar (NEW: Top-Left Position) -->
    <div class="fixed-status-bar" id="fixedStatusBar" style="display: none;">
        <div class="status-indicator-fixed">
            <i class="fas fa-circle-notch fa-spin status-icon" id="serviceIconFixed"></i>
            <span id="serviceStatusTextFixed">Memuat Status Layanan...</span>
        </div>
        <div class="employee-status-fixed" id="employeeStatusTextFixed">Memuat Status Karyawan...</div>
    </div>

    <!-- Generic Alert Modal -->
    <div id="genericAlertModal" class="generic-alert-modal">
      <div class="generic-alert-content">
        <div class="generic-alert-title" id="alertTitle">👋 Hai!</div>
        <div class="generic-alert-message" id="alertMessage">
          Pesan tidak formal dengan emoji di sini!
        </div>
        <div class="generic-alert-buttons">
          <button class="generic-alert-btn" id="alertCloseBtn">
            Oke, Lanjut! 👍
          </button>
        </div>
      </div>
    </div>

    <!-- Loading Screen (hidden by default) -->
    <div class="loading-screen" id="loadingScreen" style="display: none">
      <div class="loading-text">Tunggu siapain akun kamu!👤</div>
      <div class="loading-spinner"></div>
    </div>

    <!-- Success Screen (hidden by default) -->
    <div class="success-container" id="successContainer" data-new-user="false">
      <div class="particles" id="particles"></div>
      <div class="success-text">Sip akun udh jadi!🙏🏻</div>
      <button class="success-button" id="successButton">Thanks!</button>
    </div>

    <!-- Konfirmasi Akun Modal -->
    <div class="confirm-account-modal" id="confirmationModal" style="display: none">
      <div class="confirm-account-content">
        <h3>Konfirmasi Akun Dulu Yah!</h3>
        <div class="confirm-details">
          <p>Nama Lengkap: <strong id="confirmName"></strong></p>
          <p>Email: <strong id="confirmEmail"></strong></p>
          <p>Alamat: <strong id="confirmAddress"></strong></p>
          <p>Nomor Telepon: <strong id="confirmPhone"></strong></p>
        </div>
        <div class="confirm-account-buttons">
          <button class="confirm-account-btn confirm-yes-btn" id="confirmYesAccount">
            Bener Akunku!✅
          </button>
          <button class="confirm-account-btn confirm-no-btn" id="confirmNoAccount">
            Bukan Akunku!❎
          </button>
        </div>
      </div>
    </div>

    <!-- Confirmation Modal (Logout) -->
    <div class="confirm-modal" id="confirmModal">
      <div class="confirm-content">
        <div class="confirm-title">Konfirmasi Logout</div>
        <div class="confirm-message">Apakah Anda yakin ingin logout?</div>
        <div class="confirm-buttons">
          <button class="confirm-btn confirm-yes" id="confirmYes">Ya</button>
          <button class="confirm-btn confirm-no" id="confirmNo">Tidak</button>
        </div>
      </div>
    </div>

    <header>
      <div class="language-switcher">
        <button class="language-btn">🇮🇩</button>
        <button class="language-btn">🇬🇧</button>
      </div>
      <!-- --- START: Logo and H2 Container --- -->
      <div class="header-title-container">
        <!-- === START: Logo Image (Hero Section) === -->
        <a href="https://ibb.co.com/Jj9mYmvM" class="header-logo" target="_blank">
          <img src="https://i.ibb.co.com/5hPGQGrf/Adobe-Express-file.png" alt="Adobe-Express-file" border="0">
        </a>
        <!-- === END: Logo Image (Hero Section) === -->
        
        <!-- === PERUBAHAN SEO START: H1 diubah menjadi H2 dan diberi animasi freezeEffect === -->
        <h2 class="animate-text">Sejuk Teknik AC</h2> 
        <!-- === PERUBAHAN SEO END === -->
      </div>
      <p>Solusi AC dan Kelistrikan Profesional</p>
      <div class="rating-display">
        <div class="stars">
          <span class="star" data-rating="1">★</span>
          <span class="star" data-rating="2">★</span>
          <span class="star" data-rating="3">★</span>
          <span class="star" data-rating="4">★</span>
          <span class="star" data-rating="5">★</span>
        </div>
        <!-- Persentase diubah menjadi skor / 5.0 -->
        <div class="rating-percentage">0.0/5</div>
      </div>
    </header>
    <!-- HAPUS: Promo Banner dihapus -->
    <nav>
      <div class="nav-container">
        <a href="index.html" class="logo">Sejuk Teknik</a>
        <div class="nav-links" id="desktopNavLinks">
          <!-- Tautan 1. Beranda (Tampilkan di Mobile) -->
          <a href="index.html"><i class="fas fa-home"></i> Beranda</a>
          <!-- Tautan 2. Layanan (Tampilkan di Mobile) -->
          <a href="layanan.html"><i class="fas fa-tools"></i> Layanan</a>
          <!-- Tautan 3. 3D AC Placement Planner (Sembunyikan di Mobile, Tambahkan ke Sidebar) -->
          <a href="AC-Placement-Planner.html" class="desktop-link"><i class="fas fa-cube"></i> 3D AC Planner</a>
          <!-- Tautan 4. Tentang (Sembunyikan di Mobile, Tambahkan ke Sidebar) -->
          <a href="tentang.html" class="desktop-link"><i class="fas fa-info-circle"></i> Tentang</a>
          <!-- Tautan 5. Kontak (Sembunyikan di Mobile, Tambahkan ke Sidebar) -->
          <a href="https://wa.me/6285817818216" class="desktop-link"
            ><i class="fas fa-envelope"></i> Kontak</a
          >
          <!-- Tautan 6. FAQ (Sembunyikan di Mobile, Tambahkan ke Sidebar) -->
          <a href="faq.html" class="desktop-link"><i class="fas fa-question-circle"></i> FAQ</a>
          <!-- Tautan 7. Rating & Ulasan (Tampilkan di Mobile) -->
          <a href="rating-ulasan.html"
            ><i class="fas fa-star"></i> Rating & Ulasan</a
          >
          <!-- Tautan 8. Keluhan (Sembunyikan di Mobile, Tambahkan ke Sidebar) -->
          <a href="keluhan.html" class="desktop-link"><i class="fas fa-comment-dots"></i> Keluhan</a>
          <!-- Tautan 9. Lokasi (Sembunyikan di Mobile, Tambahkan ke Sidebar) -->
          <a href="https://maps.app.goo.gl/uTFSMLiKuWcCRUMa6" target="_blank" class="desktop-link"
            ><i class="fas fa-map-marker-alt"></i> Lokasi</a
          >
        </div>
        <div class="auth-buttons" id="authButtons">
          <button class="auth-btn login-btn" id="loginBtn">Login</button>
          <button class="auth-btn signup-btn" id="signupBtn">Sign Up</button>
        </div>
        <!-- NEW: Hamburger Button for Mobile -->
        <button class="hamburger" id="hamburgerBtn" aria-label="Toggle navigation">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </button>
      </div>
    </nav>
    
    <!-- NEW: Mobile Menu (Off-Canvas) -->
    <div class="mobile-menu" id="mobileMenu">
      <div class="mobile-menu-header">
        <a href="index.html" class="logo">Sejuk Teknik</a>
        <button class="close-btn-mobile" id="closeMobileMenu">&times;</button>
      </div>
      <div class="mobile-menu-links">
          <!-- Tautan Utama (Diulang untuk Sidebar) -->
          <a href="index.html"><i class="fas fa-home"></i> Beranda</a>
          <a href="layanan.html"><i class="fas fa-tools"></i> Layanan</a>
          <a href="rating-ulasan.html"><i class="fas fa-star"></i> Rating & Ulasan</a>
          <hr> 
          <!-- Tautan Sekunder (Hanya di Sidebar) -->
          <a href="AC-Placement-Planner.html"><i class="fas fa-cube"></i> 3D AC Placement Planner</a>
          <a href="faq.html"><i class="fas fa-question-circle"></i> FAQ</a>
          <a href="tentang.html"><i class="fas fa-info-circle"></i> Tentang</a>
          <a href="keluhan.html"><i class="fas fa-comment-dots"></i> Keluhan</a>
          <a href="https://wa.me/6285817818216"><i class="fas fa-envelope"></i> Kontak</a>
          <a href="https://maps.app.goo.gl/uTFSMLiKuWcCRUMa6" target="_blank"><i class="fas fa-map-marker-alt"></i> Lokasi</a>
          <hr>
          <div class="auth-buttons-mobile" id="authButtonsMobile">
              <!-- Auth buttons will be cloned here by JS -->
          </div>
      </div>
    </div>
    <section class="hero">
      <div class="hero-content">
        <!-- === PERUBAHAN SEO START: H1 dioptimalkan isinya === -->
        <h1>Jasa Servis, Cuci, dan Perbaikan AC Terbaik di Jakarta & Depok</h1>
        <!-- === PERUBAHAN SEO END === -->
        <p>
          Layanan terpercaya & profesional untuk rumah dan tempat usaha Anda
        </p>
        <div class="visi-misi">
          <p>
            Kami siap memberikan solusi terbaik dalam pemasangan, perawatan, dan
            service AC serta instalasi kelistrikan, didukung teknisi
            berpengalaman dan harga transparan.
          </p>
        </div>
        <a
          href="https://wa.me/6285817818216"
          class="btn btn-whatsapp"
          target="_blank"
        >
          <i class="fab fa-whatsapp"></i> Hubungi Kami
        </a>
      </div>
    </section>
    <section class="content">
      <div class="service-highlights">
        <div class="service-card" data-service-type="cuci-ac">
          <div class="service-icon">
            <i class="fas fa-air-conditioner"></i>
          </div>
          <div class="service-content">
            <h3>Service AC</h3>
            <p>perbaiki AC anda dengan profesional</p>
            <a
              href="https://zelwit.github.io/Sejuk-TeknikAC/cuci-ac.html"
              class="btn"
              >Pesan Sekarang</a
            >
          </div>
        </div>
        <div class="service-card" data-service-type="cuci-ac">
          <div class="service-icon">
            <i class="fas fa-broom"></i>
          </div>
          <div class="service-content">
            <h3>Cuci AC</h3>
            <p>Perawatan rutin untuk performa AC optimal</p>
            <a
              href="https://zelwit.github.io/Sejuk-TeknikAC/cuci-ac.html"
              class="btn"
              >Pesan Sekarang</a
            >
          </div>
        </div>
        <div class="service-card" data-service-type="sewa-ac">
          <div class="service-icon">
            <i class="fas fa-snowflake"></i>
          </div>
          <div class="service-content">
            <h3>Sewa AC</h3>
            <p>Sewa AC berkualitas untuk acara Anda</p>
            <a
              href="https://zelwit.github.io/Sejuk-TeknikAC/sewa-ac.html"
              class="btn"
              >Pesan Sekarang</a
            >
          </div>
        </div>
      </div>
    </section>
    <section class="content">
      <div class="calculator">
        <h3><i class="fas fa-calculator"></i> Simulasi Harga Pemasangan AC</h3>
        <div class="form-group">
          <label for="ac-type">Jenis AC</label>
          <select id="ac-type">
            <option value="standard">Standard (1/2 PK)</option>
            <option value="medium">Medium (3/4 PK)</option>
            <option value="large">Large (1 PK)</option>
            <option value="xl">Extra Large (2 PK)</option>
          </select>
        </div>
        <div class="form-group">
          <label for="pipa">Panjang Pipa (meter)</label>
          <input type="number" id="pipa" min="1" max="20" value="5" />
        </div>
        <div class="form-group">
          <label for="ruangan">Luas Ruangan (m²)</label>
          <input type="number" id="ruangan" min="5" max="50" value="15" />
        </div>
        <button class="btn" onclick="calculatePrice()">Hitung Estimasi</button>
        <div class="result" id="result"></div>
      </div>
    </section>
    <section class="content">
      <div class="section-title">
        <h2>Testimoni Pelanggan</h2>
        <p>Apa kata mereka tentang layanan kami</p>
      </div>
      <!-- Tempat Testimoni Dinamis dari Firestore -->
      <!-- Konten testimonial akan diisi dan dirotasi oleh JS -->
      <div class="testimonials" id="dynamicTestimonials">
        <p style="text-align: center; color: var(--gray)">
          Memuat testimoni terbaru...
        </p>
      </div>
    </section>
    <section class="content">
      <div class="stats">
        <div class="stat-item">
          <div class="stat-icon">🧊</div>
          <div class="stat-number" data-count="300">60+</div>
          <div class="stat-label">Unit AC Telah Dipasang</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">🛠️</div>
          <div class="stat-number" data-count="1000">100+</div>
          <div class="stat-label">Pelanggan Puas</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">🔧</div>
          <div class="stat-number" data-count="5">5</div>
          <div class="stat-label">Tahun Pengalaman</div>
        </div>
      </div>
    </section>
    <section class="content">
      <div class="section-title">
        <h2>Wilayah Layanan Kami</h2>
        <p>Kami melayani berbagai area di Jakarta Utara dan sekitarnya</p>
      </div>
      <div class="map-container">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.521260322283!2d106.8195613506864!3d-6.194741395493371!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNsKwMTAnNDEuMSJTIDEwNsKwNDknMTAuMyJF!5e0!3m2!1sen!2sid!4v1621234567890!5m2!1sen!2sid"
          width="100%"
          height="100%"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
        ></iframe>
      </div>
    </section>
    <section class="content">
      <div class="section-title">
        <h2>Tips & Artikel</h2>
        <p>Informasi berguna seputar perawatan AC</p>
      </div>
      <div class="blog-posts">
        <div class="blog-card">
          <div class="blog-image">
            <i class="fas fa-question-circle"></i>
          </div>
          <div class="blog-content">
            <h3>5 Tanda AC Kamu Butuh Diservice</h3>
            <p>
              Ketahui tanda-tanda ketika AC Anda membutuhkan perawatan
              profesional sebelum masalah menjadi lebih serius.
            </p>
            <button class="btn read-more-btn" data-modal="modal1">
              Baca Selengkapnya
            </button>
          </div>
        </div>
        <div class="blog-card">
          <div class="blog-image">
            <i class="fas fa-gas-pump"></i>
          </div>
          <div class="blog-content">
            <h3>Perbedaan Freon R32 vs R410A</h3>
            <p>
              Memahami perbedaan antara dua jenis freon yang umum digunakan
              dalam AC modern saat ini.
            </p>
            <button class="btn read-more-btn" data-modal="modal2">
              Baca Selengkapnya
            </button>
          </div>
        </div>
        <div class="blog-card">
          <div class="blog-image">
            <i class="fas fa-tools"></i>
          </div>
          <div class="blog-content">
            <h3>Cara Merawat AC Agar Tahan Lama</h3>
            <p>
              Tips sederhana untuk merawat AC Anda agar tetap berfungsi optimal
              dengan usia pakai yang panjang.
            </p>
            <button class="btn read-more-btn" data-modal="modal3">
              Baca Selengkapnya
            </button>
          </div>
        </div>
      </div>
    </section>
    <div id="modal1" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h3>5 Tanda AC Kamu Butuh Diservice</h3>
        <p>
          AC yang berfungsi dengan baik adalah kenyamanan yang sering kita
          anggap remeh, sampai tiba-tiba berhenti bekerja. Berikut adalah 5
          tanda bahwa AC Anda membutuhkan perhatian profesional:
        </p>
        <ol>
          <li>
            <strong>Udara tidak sedingin biasanya</strong> - Jika AC Anda tidak
            lagi mendinginkan ruangan seperti dulu, mungkin ada masalah dengan
            kompresor atau level freon.
          </li>
          <li>
            <strong>Suara aneh atau berisik</strong> - Bunyi berdecit, berderak,
            atau bergetar keras bisa menandakan masalah mekanis.
          </li>
          <li>
            <strong>Bau tidak sedap</strong> - Bau apek bisa berarti ada jamur
            di saluran, sementara bau terbakar bisa menandakan masalah listrik.
          </li>
          <li>
            <strong>Kebocoran air</strong> - Air yang menetes dari unit dalam
            bisa berarti saluran pembuangan tersumbat.
          </li>
          <li>
            <strong>Tagihan listrik melonjak</strong> - AC yang bekerja terlalu
            keras akan mengonsumsi lebih banyak energi.
          </li>
        </ol>
        <p>
          Jangan tunda perbaikan AC Anda. Hubungi teknisi profesional Sejuk
          Teknik untuk diagnosis dan perbaikan yang tepat.
        </p>
      </div>
    </div>
    <div id="modal2" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h3>Perbedaan Freon R32 vs R410A</h3>
        <p>
          Freon adalah zat pendingin yang digunakan dalam sistem AC. Dua jenis
          yang umum saat ini adalah R32 dan R410A. Berikut perbedaannya:
        </p>

        <h4>Freon R410A</h4>
        <ul>
          <li>Campuran dari dua zat (R32 dan R125)</li>
          <li>Tekanan kerja lebih tinggi</li>
          <li>Potensi pemanasan global (GWP) 2088</li>
          <li>Lebih banyak digunakan di AC produksi lama</li>
        </ul>

        <h4>Freon R32</h4>
        <ul>
          <li>Zat tunggal (tidak campuran)</li>
          <li>Efisiensi energi lebih baik (sekitar 10%)</li>
          <li>GWP lebih rendah (675)</li>
          <li>Lebih ramah lingkungan</li>
          <li>Membutuhkan lebih sedikit isi (sekitar 30% lebih sedikit)</li>
        </ul>

        <p>
          Kebanyakan AC baru sekarang menggunakan R32 karena lebih efisien dan
          ramah lingkungan. Namun, pengisian harus dilakukan oleh teknisi
          bersertifikat karena sifatnya yang mudah terbakar.
        </p>
      </div>
    </div>
    <div id="modal3" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h3>Cara Merawat AC Agar Tahan Lama</h3>
        <p>
          Dengan perawatan yang tepat, AC Anda bisa bertahan hingga 10-15 tahun.
          Berikut tips merawat AC Anda:
        </p>

        <h4>Perawatan Rutin</h4>
        <ul>
          <li>
            <strong>Cuci filter</strong> setiap 1-2 bulan. Filter kotor
            mengurangi aliran udara dan membuat AC bekerja lebih keras.
          </li>
          <li>
            <strong>Bersihkan unit outdoor</strong> dari daun, debu, dan kotoran
            yang bisa menyumbat sirip pendingin.
          </li>
          <li>
            <strong>Service profesional</strong> setahun sekali untuk
            pemeriksaan menyeluruh dan pembersihan bagian dalam.
          </li>
        </ul>

        <h4>Penggunaan Bijak</h4>
        <ul>
          <li>
            Atur suhu ideal (24-26°C). Setiap 1°C lebih dingin meningkatkan
            konsumsi energi 6%.
          </li>
          <li>Gunakan timer atau fitur sleep mode di malam hari.</li>
          <li>
            Tutup pintu/jendela saat AC menyala untuk mempertahankan suhu.
          </li>
        </ul>

        <h4>Ketika Musim Hujan</h4>
        <ul>
          <li>
            Nyalakan AC setidaknya 15 menit seminggu sekali untuk mencegah
            kompresor macet.
          </li>
          <li>
            Jika tidak digunakan dalam waktu lama, tutup unit outdoor untuk
            melindungi dari hujan dan debu.
          </li>
        </ul>

        <p>
          Dengan perawatan rutin, AC Anda akan bekerja lebih efisien, lebih
          tahan lama, dan menghemat biaya listrik bulanan.
        </p>
      </div>
    </div>
    <section class="content">
      <div class="payment-methods">
        <div class="payment-method">✅ DANA</div>
        <div class="payment-method">✅ BCA</div>
        <div class="payment-method">✅ BRI</div>
        <div class="payment-method">✅ Mandiri</div>
        <div class="payment-method">✅ Tunai</div>
      </div>
    </section>
    <section class="content">
      <div class="section-title">
        <h2>Sertifikat & Legalitas</h2>
        <p>Bukti profesionalisme dan keahlian kami</p>
      </div>
      <div class="certificates">
        <div class="certificate">
          <i class="fas fa-certificate"></i>
          <div>Sertifikat Teknisi AC</div>
        </div>
        <div class="certificate">
          <i class="fas fa-id-card"></i>
          <div>Lisensi Resmi</div>
        </div>
        <div class="certificate">
          <i class="fas fa-shield-alt"></i>
          <div>Asuransi Kerja</div>
        </div>
      </div>
    </section>
    <section class="content">
      <div class="diagnosis">
        <h3><i class="fas fa-stethoscope"></i> Diagnosa Masalah AC</h3>
        <p>Pilih gejala yang Anda alami:</p>
        <div class="diagnosis-options">
          <div class="diagnosis-option" onclick="showDiagnosis('tidak-dingin')">
            AC tidak dingin
          </div>
          <div class="diagnosis-option" onclick="showDiagnosis('keluar-air')">
            Keluar air
          </div>
          <div class="diagnosis-option" onclick="showDiagnosis('berisik')">
            Berisik
          </div>
          <div class="diagnosis-option" onclick="showDiagnosis('mati-total')">
            Mati total
          </div>
        </div>
        <div class="diagnosis-result" id="diagnosis-result"></div>
      </div>
    </section>
    <section class="content">
      <div class="security-banner">
        <i class="fas fa-lock"></i> Data Anda Aman – Kami tidak menyebarkan
        nomor HP atau foto properti Anda
      </div>
    </section>
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-about">
          <div class="footer-logo">
            <i class="fas fa-snowflake"></i>
            Sejuk Teknik AC
          </div>
          <p>
            Solusi AC dan kelistrikan profesional sejak 2020. Memberikan
            pelayanan terbaik dengan teknisi berpengalaman dan harga terjangkau.
          </p>
        </div>
        <div class="footer-links">
          <h3>Menu</h3>
          <ul>
            <li>
              <a href="index.html"><i class="fas fa-home"></i> Beranda</a>
            </li>
            <li>
              <a href="layanan.html"><i class="fas fa-tools"></i> Layanan</a>
            </li>
            <li>
              <a href="AC-Placement-Planner.html"
                ><i class="fas fa-cube"></i> 3D AC Planner</a
              >
            </li>
            <li>
              <a href="tentang.html"
                ><i class="fas fa-info-circle"></i> Tentang</a
              >
            </li>
            <li>
              <a href="https://wa.me/6285817818216"
                ><i class="fas fa-envelope"></i> Kontak</a
              >
            </li>
          </ul>
        </div>
        <div class="footer-links">
          <h3>Layanan</h3>
          <ul>
            <li>
              <a href="#"
                ><i class="fas fa-air-conditioner"></i> Instalasi AC</a
              >
            </li>
            <li>
              <a href="cuci-ac.html"><i class="fas fa-broom"></i> Cuci AC</a>
            </li>
            <li>
              <a href="cuci-ac.html"><i class="fas fa-tools"></i> Service AC</a>
            </li>
            <li>
              <a href="panel-distribusi.html"
                ><i class="fas fa-bolt"></i> Instalasi Listrik</a
              >
            </li>
            <li>
              <a href="sewa-ac.html"
                ><i class="fas fa-snowflake"></i> Sewa AC</a
              >
            </li>
          </ul>
        </div>
        <div class="footer-contact">
          <h3>Kontak Kami</h3>
          <p><i class="fab fa-whatsapp"></i> WhatsApp: 085817818216</p>
          <p>
            <i class="fas fa-envelope"></i> Email:
            jayatehnikmandiri234@gmail.com
          </p>
          <p><i class="fas fa-clock"></i> Buka: 09:00 - 07:00 WIB</p>
          <p>
            <i class="fas fa-map-marker-alt"></i> Jl. Raya Perjuangan No.25
            RT.16 RW.07, Tugu Selatan Koja
          </p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>© 2020-2025 Sejuk Teknik AC. All Rights Reserved.</p>
      </div>
    </footer>

    <div id="loginModal" class="auth-modal">
      <div class="auth-modal-content">
        <span class="close-btn">&times;</span>
        <h2>Login ke Akun Anda</h2>
        <button class="google-btn" id="googleLoginBtn">
          <i class="fab fa-google"></i> Masuk dengan Google
        </button>
        <div class="divider">
          <div class="divider-line"></div>
          <div class="divider-text">atau</div>
          <div class="divider-line"></div>
        </div>
        <div class="form-group">
          <label for="loginEmail">Email</label>
          <input type="email" id="loginEmail" placeholder="Email Anda" />
        </div>
        <div class="form-group">
          <label for="loginPassword">Kata Sandi</label>
          <div class="password-container">
            <input
              type="password"
              id="loginPassword"
              placeholder="Kata sandi"
            />
            <button class="password-toggle" id="toggleLoginPassword">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        <button class="btn" id="loginSubmitBtn">Login</button>
        <p style="text-align: center; margin-top: 15px">
          Belum punya akun? <a href="#" id="switchToSignup">Daftar sekarang</a>
        </p>
      </div>
    </div>

    <div id="signupModal" class="auth-modal">
      <div class="auth-modal-content">
        <span class="close-btn">&times;</span>
        <div class="step-indicator">
          <div class="step active" data-step="1">1</div>
          <div class="step" data-step="2">2</div>
          <div class="step" data-step="3">3</div>
        </div>

        <div class="auth-step active" id="signupStep1">
          <h2>Daftar Akun Baru</h2>
          <button class="google-btn" id="googleSignupBtn">
            <i class="fab fa-google"></i> Daftar dengan Google
          </button>
          <div class="divider">
            <div class="divider-line"></div>
            <div class="divider-text">atau</div>
            <div class="divider-line"></div>
          </div>
          <div class="form-group">
            <label for="signupName">Nama Lengkap</label>
            <input
              type="text"
              id="signupName"
              placeholder="Nama lengkap Anda"
            />
          </div>
          <button class="btn" id="signupStep1Btn">Lanjut</button>
          <p style="text-align: center; margin-top: 15px">
            Sudah punya akun? <a href="#" id="switchToLogin">Masuk sekarang</a>
          </p>
        </div>

        <div class="auth-step" id="signupStep2">
          <h2>Informasi Tambahan</h2>
          <div class="form-group">
            <label for="signupAddress">Alamat</label>
            <input
              type="text"
              id="signupAddress"
              placeholder="Alamat lengkap Anda"
            />
          </div>
          <div class="form-group">
            <label for="signupPhone">Nomor Telepon</label>
            <input
              type="tel"
              id="signupPhone"
              placeholder="Nomor telepon aktif"
            />
          </div>
          <div class="form-group">
            <label>Unggah Foto (Opsional)</label>
            <div class="file-upload">
              <input type="file" id="signupFile" accept="image/*" />
              <label for="signupFile" class="file-upload-label">
                <i class="fas fa-cloud-upload-alt"></i> Klik untuk unggah foto
              </label>
            </div>
          </div>
          <div style="display: flex; justify-content: space-between">
            <button
              class="btn"
              style="background-color: #ccc; color: #333"
              id="signupBackBtn"
            >
              Kembali
            </button>
            <button class="btn" id="signupStep2Btn">Lanjut</button>
          </div>
        </div>

        <div class="auth-step" id="signupStep3">
          <h2>Buat Akun Anda</h2>
          <div class="form-group">
            <label for="signupEmail">Email</label>
            <input
              type="email"
              id="signupEmail"
              placeholder="Masukkan email Anda"
            />
          </div>
          <div class="form-group">
            <label for="signupPassword">Kata Sandi</label>
            <div class="password-container">
              <input
                type="password"
                id="signupPassword"
                placeholder="Buat kata sandi kuat"
              />
              <button class="password-toggle" id="toggleSignupPassword">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <small style="color: #666"
              >Gunakan minimal 8 karakter dengan kombinasi huruf, angka, dan
              simbol</small
            >
          </div>
          <div class="form-group">
            <label for="signupConfirmPassword">Konfirmasi Kata Sandi</label>
            <div class="password-container">
              <input
                type="password"
                id="signupConfirmPassword"
                placeholder="Konfirmasi kata sandi"
              />
              <button class="password-toggle" id="toggleSignupConfirmPassword">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <div style="display: flex; justify-content: space-between">
            <button
              class="btn"
              style="background-color: #ccc; color: #333"
              id="signupBackBtn2"
            >
              Kembali
            </button>
            <button class="btn" id="signupSubmitBtn">Daftar Sekarang</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Initialize Firebase
      // Ganti dengan konfigurasi Firebase Anda
      const firebaseConfig = {
        apiKey: "AIzaSyDtLHSz7-KU97ALJTQvLRQTG5yj7brcsvc", // Tetap rahasiakan API Key Anda
        authDomain: "sejuk-teknik.firebaseapp.com",
        projectId: "sejuk-teknik",
        storageBucket: "sejuk-teknik.appspot.com", // pastikan ini benar
        messagingSenderId: "733860478343",
        appId: "1:733860478343:web:172838a08e702d129ae722",
        measurementId: "G-EDJ6Y6J7GC",
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();

      // Cooldown variables
      let lastLoginTime = 0;
      let lastLogoutTime = 0;
      const COOLDOWN_TIME = 5000; // 5 seconds

      // Variable Global untuk melacak apakah ini adalah pendaftaran pertama user
      let isFirstSignup = false;
      // Variable Global untuk menyimpan data user yang sedang diproses untuk konfirmasi
      let pendingUserData = null;
      // Variable Global untuk melacak status operasional (NEW)
      let isServiceOpenGlobal = false;
      let isUserLoggedInGlobal = false;
      
      // ===============================================
      // VARIABEL BARU UNTUK TESTIMONIALS
      // ===============================================
      let allPositiveTestimonials = []; // Menyimpan semua testimoni positif

      // ===============================================
      // FUNGSI BARU: GENERIC ALERT MODAL (Menggantikan alert())
      // ===============================================
      function showCustomAlert(title, message, isError = false) {
        const modal = document.getElementById("genericAlertModal");
        const modalTitle = document.getElementById("alertTitle");
        const modalMessage = document.getElementById("alertMessage");
        const closeBtn = document.getElementById("alertCloseBtn");

        modalTitle.textContent = title;
        modalMessage.innerHTML = message; // Use innerHTML for emojis/formatting

        if (isError) {
          modalTitle.style.color = "#f44336"; // Merah untuk error
          closeBtn.textContent = "Baiklah 😥";
          closeBtn.style.backgroundColor = "#f44336";
        } else {
          modalTitle.style.color = "var(--primary)"; // Biru untuk info
          closeBtn.textContent = "Oke, Lanjut! 👍";
          closeBtn.style.backgroundColor = "var(--primary)";
        }

        modal.style.display = "flex";
        document.body.style.overflow = "hidden";

        closeBtn.onclick = () => {
          modal.style.display = "none";
          document.body.style.overflow = "auto";
        };
      }

      // FUNGSI: Map pesan formal menjadi informal + emoji
      function mapGenericAlert(formalMessage) {
        let title = "Info Dulu Ya! 📣";
        let message = formalMessage;

        if (formalMessage.includes("Fitur ganti bahasa")) {
          message =
            "Ganti bahasanya lagi disiapin ya! Tunggu sebentar lagi, pasti seru! 🥳";
        } else if (formalMessage.includes("Tunggu beberapa saat")) {
          message = "Sabar, jangan buru-buru! Coba lagi 5 detik dari sekarang ya. 😉";
        } else if (formalMessage.includes("minimal 8 karakter")) {
          title = "Password Kurang Kuat! 🛡️";
          message =
            "Password-nya minimal harus 8 karakter ya. Campur huruf, angka, dan simbol biar aman!";
        } else if (formalMessage.includes("tidak cocok")) {
          title = "Password Gak Sama! 🙅‍♂️";
          message =
            "Password dan Konfirmasi Password-nya harus sama persis ya. Cek lagi ketikannya!";
        } else if (formalMessage.includes("harus diisi")) {
          title = "Lengkapi Dulu Yuk! 📝";
          message =
            "Semua kolom yang wajib diisi belum terisi nih. Jangan sampai ada yang kelewat ya!";
        } else if (formalMessage.includes("berhasil logout")) {
          title = "Sampai Jumpa Lagi! 👋";
          message =
            "Kamu sudah berhasil *logout*. Senang melihatmu! Kapan-kapan mampir lagi ya!";
        } else if (formalMessage.includes("Gagal untuk logout")) {
          title = "Gagal Logout! 😟";
          message = "Ada masalah saat mencoba *logout*. Coba *refresh* halaman dan ulangi.";
        } else if (formalMessage.includes("Akun dibatalkan")) {
          title = "Akun Dibatalkan! 💔";
          message = "Baiklah, pendaftaran akun ini dibatalkan. Silakan daftar ulang kalau mau ya.";
        } else if (formalMessage.includes("hadiah user baru")) {
          title = "Hadiah Siap! 🎁";
          message = "Hadiah *user* baru udh dikirim di **Inbox** kamu yah! Cek gih! 🎉";
        } else if (formalMessage.includes("Pop-up Disembunyikan")) {
          title = "Pop-up Disembunyikan 🤫";
        }
        // Tambahkan logika lain sesuai kebutuhan

        return { title, message };
      }
      
      // FUNGSI: Map pesan error Firebase
      function mapErrorToInformal(error) {
          let title = "Ups, Ada Kesalahan! 😬";
          let message = `Ada masalah teknis! Coba lagi sebentar ya. Pesan error: ${error.message}`;
          
          switch(error.code) {
              case 'auth/email-already-in-use':
                  title = "Email Sudah Terdaftar! 😥";
                  message = "Email ini sudah punya akun di sini! Coba *Login* aja atau pakai email lain ya.";
                  break;
              case 'auth/user-not-found':
              case 'auth/wrong-password':
              case 'auth/invalid-credential':
                  title = "Gagal Login! 😵‍💫";
                  message = "Email atau *password*-mu salah nih! Cek lagi ya, jangan sampai salah ketik!";
                  break;
              case 'auth/weak-password':
                  title = "Password Kurang Kuat! 🛡️";
                  message = "Password-nya minimal harus 8 karakter ya. Campur huruf, angka, dan simbol biar aman!";
                  break;
              default:
                  title = "Error Tak Terduga! 🐛";
                  // Tampilkan pesan error asli jika tidak dikenali
                  message = `Ada masalah teknis! Coba lagi sebentar ya. Pesan error: ${error.message}`;
                  break;
          }
          return { title, message };
      }

      // OVERRIDE: Ganti semua alert() bawaan JavaScript
      window.alert = function (message) {
        const { title, message: informalMessage } = mapGenericAlert(message);
        showCustomAlert(title, informalMessage);
      };

      // Animate stats counters
      function animateCounters() {
        const counters = document.querySelectorAll('.stat-number');
        const speed = 200;
        
        counters.forEach(counter => {
          const target = +counter.getAttribute('data-count');
          const count = +counter.innerText;
          const inc = target / speed;
          
          if (count < target) {
            counter.innerText = Math.ceil(count + inc);
            setTimeout(() => animateCounters(), 1);
          } else {
            counter.innerText = target;
          }
        });
      }

      // Price calculator
      function calculatePrice() {
        const acType = document.getElementById('ac-type').value;
        const pipaLength = document.getElementById('pipa').value;
        const roomSize = document.getElementById('ruangan').value;
        
        let basePrice = 0;
        
        switch(acType) {
          case 'standard':
            basePrice = 1500000;
            break;
          case 'medium':
            basePrice = 2000000;
            break;
          case 'large':
            basePrice = 2500000;
            break;
          case 'xl':
            basePrice = 3500000;
            break;
        }
        
        const pipaCost = pipaLength * 100000;
        const roomCost = roomSize > 20 ? 500000 : 0;
        
        const totalPrice = basePrice + pipaCost + roomCost;
        
        const resultDiv = document.getElementById('result');
        resultDiv.style.display = 'block';
        resultDiv.innerHTML = `
          <h4>Estimasi Harga: Rp ${totalPrice.toLocaleString('id-ID')}</h4>
          <p>Biaya sudah termasuk instalasi, material, dan jasa teknisi</p>
        `;
      }

      // AC Diagnosis
      function showDiagnosis(problem) {
        const resultDiv = document.getElementById('diagnosis-result');
        resultDiv.style.display = 'block';
        
        switch(problem) {
          case 'tidak-dingin':
            resultDiv.innerHTML = `
              <h4>Kemungkinan Masalah:</h4>
              <ul>
                <li>Freon habis atau bocor</li>
                <li>Kompresor rusak</li>
                <li>Filter udara kotor</li>
                <li>Fan indoor tidak berputar</li>
                <li>PCB board rusak</li>
              </ul>
              <p><strong>Solusi:</strong> Segera hubungi teknisi kami untuk pemeriksaan lebih lanjut dan penambahan freon jika diperlukan.</p>
            `;
            break;
          case 'keluar-air':
            resultDiv.innerHTML = `
              <h4>Kemungkinan Masalah:</h4>
              <ul>
                <li>Saluran pembuangan air mampet</li>
                <li>Unit AC tidak miring</li>
                <li>Drain pan patah atau bocor</li>
                <li>Evaporator kotor</li>
              </ul>
              <p><strong>Solusi:</strong> Periksa saluran pembuangan dan pastikan unit AC terpasang dengan kemiringan yang benar.</p>
            `;
            break;
          case 'berisik':
            resultDiv.innerHTML = `
              <h4>Kemungkinan Masalah:</h4>
              <ul>
                <li>Baut pada unit indoor kendor</li>
                <li>Fan indoor kotor atau bengkok</li>
                <li>Kompresor bermasalah</li>
                <li>Motor fan aus</li>
              </ul>
              <p><strong>Solusi:</strong> Cek baut dan kebersihan unit. Jika masalah berlanjut, hubungi teknisi kami.</p>
            `;
            break;
          case 'mati-total':
            resultDiv.innerHTML = `
              <h4>Kemungkinan Masalah:</h4>
              <ul>
                <li>Listrik mati atau fuse putus</li>
                <li>Remote AC rusak atau baterai habis</li>
                <li>Kabel power terputus</li>
                <li>PCB board rusak</li>
              </ul>
              <p><strong>Solusi:</strong> Periksa sumber listrik dan remote AC. Jika tidak ada masalah, hubungi teknisi kami.</p>
            `;
            break;
        }
      }

      // Card animation on scroll
      const cards = document.querySelectorAll('.card');
      const cardObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
            }
          });
        },
        { threshold: 0.1 }
      );
      
      cards.forEach((card) => cardObserver.observe(card));
      
      // Language switcher
      const languageBtns = document.querySelectorAll('.language-btn');
      languageBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          window.alert('Fitur ganti bahasa akan datang!'); // Sudah diganti ke window.alert
        });
      });

      // Modal functionality for blog posts
      const modalBtns = document.querySelectorAll('.read-more-btn');
      const modals = document.querySelectorAll('.modal');
      const closeBtns = document.querySelectorAll('.modal .close-btn');
      
      modalBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const modalId = btn.getAttribute('data-modal');
          document.getElementById(modalId).style.display = 'block';
        });
      });

      closeBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          btn.closest('.modal').style.display = 'none';
        });
      });

      window.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
          e.target.style.display = 'none';
        }
      });
      
      // Create particle effect
      function createParticles() {
        const particlesContainer = document.getElementById('particles');
        const particleCount = 50;
        
        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.classList.add('particle');
          
          // Random size
          const size = Math.random() * 10 + 5;
          particle.style.width = `${size}px`;
          particle.style.height = `${size}px`;
          
          // Random position
          const posX = Math.random() * 100;
          const posY = Math.random() * 100;
          particle.style.left = `${posX}%`;
          particle.style.top = `${posY}%`;
          
          // Random animation delay
          const delay = Math.random() * 3;
          particle.style.animationDelay = `${delay}s`;
          
          particlesContainer.appendChild(particle);
        }
      }
      
      // Show loading screen
      function showLoadingScreen() {
        document.getElementById('loadingScreen').style.display = 'flex';
      }
      
      // Hide loading screen
      function hideLoadingScreen() {
        document.getElementById('loadingScreen').style.display = 'none';
      }
      
      // Show success screen (dengan flag untuk new user)
      function showSuccessScreen(isNewUser = false) {
        document.getElementById('successContainer').style.display = 'flex';
        document.getElementById('successContainer').setAttribute('data-new-user', isNewUser); // Store the flag
        createParticles();
      }
      
      // Hide success screen
      function hideSuccessScreen() {
        document.getElementById('successContainer').style.display = 'none';
      }
      
      // Logic setelah klik 'Thanks!'
      function handleSuccessAction() {
        const container = document.getElementById('successContainer');
        const isNewUser = container.getAttribute('data-new-user') === 'true';
        hideSuccessScreen();
        
        if (isNewUser) {
            window.alert('hadiah user baru udh di kirim di notif kamu yah cek gih!'); // Diganti ke window.alert
            container.setAttribute('data-new-user', 'false'); // Reset flag
        }
        
        updateNotificationBadge();
      }
      
      // Fungsi untuk mengupdate badge notifikasi
      function updateNotificationBadge() {
          const user = auth.currentUser;
          if (!user) {
              return;
          }

          db.collection('notifications')
            .where('userId', '==', user.uid)
            .where('read', '==', false)
            .get()
            .then(snapshot => {
                const count = snapshot.size;
                const badge = document.getElementById('notificationBadgeTop');
                
                if (badge) { 
                    badge.textContent = count > 0 ? count : '';
                    badge.style.display = count > 0 ? 'flex' : 'none';
                }
            })
            .catch(error => {
                console.error('Error updating badge:', error);
            });
      }
      
      // Show confirmation modal
      function showConfirmModal() {
        document.getElementById('confirmModal').style.display = 'block';
      }
      
      // Hide confirmation modal
      function hideConfirmModal() {
        document.getElementById('confirmModal').style.display = 'none';
      }
      
      // ===============================================
      // FUNGSI UNTUK ROTASI TESTIMONIALS (DENGAN ANIMASI)
      // ===============================================

      // 1. Mengambil semua Testimoni Positif dan menyimpannya
      function loadTestimonials() {
        const container = document.getElementById("dynamicTestimonials");
        container.innerHTML =
          '<p style="text-align: center; color: var(--gray);">Memuat testimoni terbaru...</p>';
          
        allPositiveTestimonials = []; // Reset array

        db.collection("reviews") // Mengambil dari koleksi 'reviews'
          .orderBy("timestamp", "desc") // Mengambil yang terbaru dulu
          .limit(50) // Hanya ambil 50 terbaru
          .get()
          .then((snapshot) => {
            snapshot.forEach((doc) => {
              const review = doc.data();
              // FILTER: Hanya ambil yang ratingnya 4 atau 5 (positif)
              if ((review.rating || 0) >= 4) {
                allPositiveTestimonials.push(review);
              }
            });
            
            // Setelah data terambil, tampilkan subset acak pertama kali
            displayRandomTestimonials(); 

            if (allPositiveTestimonials.length > 0) {
                // Atur interval untuk rotasi jika ada testimoni
                setInterval(displayRandomTestimonials, 8000); // Ganti setiap 8 detik
            } else {
                container.innerHTML =
                  '<p style="text-align: center; color: var(--gray);">Belum ada testimoni positif (Rating 4 atau 5) yang tersedia.</p>';
            }

          })
          .catch((error) => {
            console.error("Error loading testimonials:", error);
            container.innerHTML =
              '<p style="text-align: center; color: red;">Gagal memuat testimoni.</p>';
          });
      }

      // 2. Menampilkan subset acak dari testimonials yang sudah tersimpan (dengan Fade Animation)
      function displayRandomTestimonials() {
          const container = document.getElementById("dynamicTestimonials");
          const maxDisplay = 3; // Jumlah testimonial yang ingin ditampilkan
          
          if (allPositiveTestimonials.length === 0) {
              return;
          }
          
          // Fungsi untuk mendapatkan subset acak
          const shuffled = allPositiveTestimonials.sort(() => 0.5 - Math.random());
          let selected = shuffled.slice(0, maxDisplay);

          // Langkah 1: Fade Out
          container.style.opacity = 0;
          
          setTimeout(() => {
              // Langkah 2: Ganti Konten
              container.innerHTML = ""; // Hapus konten setelah fade out

              selected.forEach((review) => {
                const testimonial = document.createElement("div");
                testimonial.classList.add("testimonial");
                testimonial.style.opacity = 0; // Mulai tersembunyi

                // Tampilkan nama dan rating
                testimonial.innerHTML = `
                      <p>${review.reviewText}</p>
                      <div class="author">— ${
                        review.reviewerName || "Anonim"
                      }, ${review.rating} Bintang</div>
                  `;
                container.appendChild(testimonial);
                
                // Animasikan masuk satu per satu (opsional: lebih baik biarkan CSS grid menangani)
                setTimeout(() => {
                    testimonial.style.opacity = 1;
                }, 50); // Delay kecil untuk efek bertahap jika perlu
              });

              // Sesuaikan layout grid
              if (selected.length < 3) {
                  container.style.gridTemplateColumns = `repeat(${selected.length}, minmax(300px, 1fr))`;
              } else {
                  container.style.gridTemplateColumns = `repeat(auto-fit, minmax(300px, 1fr))`;
              }
              
              // Langkah 3: Fade In container (menggantikan opasitas per elemen)
              container.style.opacity = 1;

          }, 500); // Tunggu 500ms agar transisi opacity terlihat
      }


      // Update Rating Header (Menggunakan 'reviews')
      function updateRatingDisplay() {
        db.collection("reviews")
          .get()
          .then((snapshot) => {
            if (snapshot.empty) {
              document.querySelector(".rating-percentage").textContent =
                "0.0/5";
              return;
            }

            let totalRating = 0;
            let ratingCount = 0;

            snapshot.forEach((doc) => {
              totalRating += doc.data().rating || 0;
              ratingCount++;
            });

            const averageRating = totalRating / ratingCount;
            const formattedScore = averageRating.toFixed(1).replace(".", ",");

            document.querySelector(".rating-percentage").textContent =
              formattedScore + "/5";

            const stars = document.querySelectorAll(".star");
            const roundedRating = Math.round(averageRating);

            stars.forEach((star, index) => {
              star.classList.remove("filled");
              if (index < roundedRating) {
                star.classList.add("filled");
              }
            });
          })
          .catch((error) => {
            console.error("Error getting ratings:", error);
          });
      }
      
      // Konfirmasi Akun (Pasca Login/Sign Up)
      function showConfirmationModal(userData, isNewUser) {
        pendingUserData = userData; // Simpan data sementara

        document.getElementById("confirmName").textContent =
          userData.name || "N/A";
        document.getElementById("confirmEmail").textContent =
          userData.email || "N/A";
        document.getElementById("confirmAddress").textContent =
          userData.address || "Belum diisi";
        document.getElementById("confirmPhone").textContent =
          userData.phone || "Belum diisi";

        document.getElementById("confirmationModal").style.display = "flex";
        document.body.style.overflow = "hidden";

        // Event listener untuk tombol Ya
        document.getElementById("confirmYesAccount").onclick = () => {
          document.getElementById("confirmationModal").style.display = "none";
          document.body.style.overflow = "auto";

          // Lanjut ke Success Screen
          showSuccessScreen(isNewUser);
        };

        // Event listener untuk tombol Tidak (Logout)
        document.getElementById("confirmNoAccount").onclick = () => {
          auth.signOut();
          document.getElementById("confirmationModal").style.display = "none";
          document.body.style.overflow = "auto";
          window.alert("Akun dibatalkan. Silakan login atau daftar ulang."); // Diganti ke window.alert
        };
      }
      
      // ===============================================
      // FUNGSI UNTUK SINKRONISASI DENGAN ADMIN PANEL
      // MODIFIKASI: Menargetkan Fixed Status Bar yang baru
      // ===============================================
      
      // Cek Status Layanan (Duplikat dari Admin Panel)
      function checkServiceStatus(settings) {
          // 1. Cek Force Status
          if (settings.forceStatus === 'open') {
              return true;
          } else if (settings.forceStatus === 'close') {
              return false;
          }
          
          // 2. Cek Jadwal Normal
          const now = new Date();
          const localTime = now.getHours() * 60 + now.getMinutes();

          const [openH, openM] = (settings.openTime || '09:00').split(':').map(Number);
          const openMinutes = openH * 60 + openM;

          const [closeH, closeM] = (settings.closeTime || '19:00').split(':').map(Number);
          const closeMinutes = closeH * 60 + closeM;

          // Asumsi jam buka: 09:00, jam tutup: 19:00. Buka jika waktu saat ini di antara jam buka dan tutup.
          return localTime >= openMinutes && localTime < closeMinutes;
      }
      
      // 1. Operational Status & Employee Status (Dari settings/operational)
      function loadOperationalStatus(isLoggedIn) {
          // TARGETKAN ELEMENT BARU
          const statusBar = document.getElementById('fixedStatusBar');
          const statusText = document.getElementById('serviceStatusTextFixed');
          const employeeText = document.getElementById('employeeStatusTextFixed');
          const icon = document.getElementById('serviceIconFixed');
          
          db.collection('settings').doc('operational').onSnapshot(doc => {
              if (doc.exists) {
                  const settings = doc.data();
                  const isOpen = checkServiceStatus(settings);
                  
                  isServiceOpenGlobal = isOpen; // Update global status
                  
                  statusBar.style.display = 'flex'; // Tampilkan bar
                  
                  // Hapus semua kelas warna yang mungkin ada sebelumnya
                  statusBar.classList.remove('status-green', 'status-yellow', 'status-red', 'open', 'closed'); 

                  let employeeStatus = settings.employeeStatus ? `${settings.employeeStatus}` : 'Siaga';

                  if (isOpen) {
                      // Layanan BUKA: Tentukan antara Hijau atau Kuning
                      if (employeeStatus.toLowerCase().includes('siaga') || employeeStatus.toLowerCase().includes('siap')) { 
                          // KONDISI HIJAU: Buka dan Siaga/Siap Mengerjakan
                          statusBar.classList.add('status-green');
                          icon.className = 'fas fa-check-circle'; 
                          statusText.textContent = 'LAYANAN DIBUKA';
                          employeeText.textContent = employeeStatus;
                      } else {
                          // KONDISI KUNING: Buka tapi Tidak Siaga (e.g., Istirahat/Sibuk)
                          statusBar.classList.add('status-yellow');
                          icon.className = 'fas fa-exclamation-triangle'; 
                          statusText.textContent = 'LAYANAN DIBUKA';
                          employeeText.textContent = employeeStatus;
                      }
                  } else {
                      // KONDISI MERAH: Layanan Tutup
                      statusBar.classList.add('status-red');
                      statusText.textContent = 'LAYANAN DITUTUP';
                      icon.className = 'fas fa-times-circle'; 
                      
                      const openTime = settings.openTime || '09:00';
                      employeeText.textContent = `Kembali datang pada ${openTime} WIB`;
                  }
                  
                  // Perbarui status card setelah mendapatkan status operasional
                  toggleServiceCards(isLoggedIn, isOpen);

              } else {
                  // Default jika data belum ada (Merah)
                  statusBar.classList.remove('status-green', 'status-yellow', 'status-red', 'open', 'closed');
                  statusBar.classList.add('status-red'); 
                  statusText.textContent = 'LAYANAN DITUTUP (Default)';
                  employeeText.textContent = 'Data operasional belum diatur.';
                  icon.className = 'fas fa-times-circle';
                  statusBar.style.display = 'flex';
                  
                  isServiceOpenGlobal = false;
                  toggleServiceCards(isLoggedIn, false);
              }
          }, error => {
              console.error("Error loading operational settings:", error);
              statusBar.classList.remove('status-green', 'status-yellow', 'status-red', 'open', 'closed');
              statusBar.classList.add('status-red'); 
              statusText.textContent = 'Gagal memuat status.';
              employeeText.textContent = '';
              statusBar.style.display = 'flex'; // Tetap tampilkan status error
          });
      }
      
      // 2. Event Pop-up Global (Dari settings/event_popup)
      function loadEventPopup() {
          const modal = document.getElementById('eventModal');
          const titleEl = document.getElementById('eventTitleModal');
          const messageEl = document.getElementById('eventMessageModal');
          const dismissBtn = document.getElementById('eventDismissBtn');
          const closeBtn = document.getElementById('eventCloseBtn');
          
          // Cek apakah user sudah pernah dismiss event ini
          // PERHATIAN: Di produksi, ID event harus dimasukkan ke dalam local storage
          if (localStorage.getItem('st_event_dismissed') === 'true') {
              return; 
          }

          db.collection('settings').doc('event_popup').get().then(doc => {
              if (doc.exists) {
                  const data = doc.data();
                  const now = new Date();
                  const start = data.start ? data.start.toDate() : null;
                  const end = data.end ? data.end.toDate() : null;

                  // Cek apakah event sedang aktif
                  if (start && end && now >= start && now <= end) {
                      titleEl.textContent = data.title;
                      messageEl.textContent = data.message;
                      
                      // NOTE: Background color dihandle di CSS/Inline style di HTML (dibiarkan default jika tidak diset)
                      
                      // Tampilkan tombol dismiss jika diizinkan
                      dismissBtn.style.display = data.dismissible !== false ? 'block' : 'none';
                      
                      modal.style.display = 'flex';
                      document.body.style.overflow = 'hidden';

                      // Handle tombol close
                      closeBtn.onclick = () => {
                          modal.style.display = 'none';
                          document.body.style.overflow = 'auto';
                      };
                      
                      // Handle tombol dismiss permanen
                      dismissBtn.onclick = () => {
                          localStorage.setItem('st_event_dismissed', 'true');
                          modal.style.display = 'none';
                          document.body.style.overflow = 'auto';
                          window.alert("Pop-up Disembunyikan", "Pop-up ini tidak akan muncul lagi sampai Admin membuat event baru. 😉");
                      };
                  }
              }
          }).catch(error => {
              console.error("Error loading event pop-up:", error);
          });
      }

      // Modifikasi: Disable/Enable Service Cards - Sekarang tergantung pada isServiceOpen juga
      function toggleServiceCards(isLoggedIn, isServiceOpen) {
          const serviceCards = document.querySelectorAll(".service-card");
          const sensitiveServices = ["cuci-ac", "sewa-ac"]; 
          
          serviceCards.forEach((card) => {
              const serviceType = card.getAttribute("data-service-type");
              
              if (sensitiveServices.includes(serviceType)) {
                  if (isLoggedIn && isServiceOpen) {
                      card.classList.remove("disabled");
                      // Reset event listener agar tombol kembali berfungsi normal
                      card.querySelectorAll(".btn").forEach((btn) => {
                          btn.onclick = null;
                      });
                      card.classList.add("enabled"); // Tambahkan kelas untuk visual
                  } else {
                      card.classList.add("disabled");
                      card.classList.remove("enabled");

                      // Perbarui teks overlay sesuai status
                      const overlayContent = card.querySelector(".card.disabled::after");
                      // This part requires CSS content manipulation, which is limited in JS. 
                      // For a true implementation, one would use a separate overlay element in the HTML
                      // For now, we rely on the generic "Login untuk Memesan" text in CSS and rely on JS alerts.
                      
                      // Tambahkan event listener pencegah
                      card.querySelectorAll(".btn").forEach((btn) => {
                          btn.onclick = (e) => {
                              e.preventDefault();
                              if (!isLoggedIn) {
                                  showCustomAlert(
                                      "Eh, Belum Login! 😅", 
                                      "Kamu harus *Login* dulu nih kalau mau pesan layanan *Service/Sewa AC*. Yuk, *Sign Up* dulu!",
                                      true
                                  );
                              } else if (!isServiceOpen) {
                                  showCustomAlert(
                                      "Layanan Tutup! 😴", 
                                      "Maaf, layanan kami sedang *tutup* sesuai **Jam Operasional** yang tertera di atas. Silakan coba lagi nanti ya!",
                                      true
                                  );
                              }
                          };
                      });
                  }
              }
          });
      }

      // NEW: Mobile Menu Handlers
      const hamburgerBtn = document.getElementById('hamburgerBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      const closeMobileMenu = document.getElementById('closeMobileMenu');
      const authButtons = document.getElementById('authButtons'); // Desktop container
      const authButtonsMobile = document.getElementById('authButtonsMobile'); // Mobile container
      
      function handleAuthClone(user) {
          // Clear both containers first
          authButtons.innerHTML = '';
          authButtonsMobile.innerHTML = '';
          
          if (user) {
              // --- LOGGED IN STATE ---
              // Buat tombol Logout
              const logoutBtn = document.createElement('button');
              logoutBtn.classList.add('auth-btn', 'login-btn');
              logoutBtn.textContent = 'Logout';
              logoutBtn.style.marginTop = '10px';
              logoutBtn.onclick = showConfirmModal;
              
              // Buat tombol Profil (DIUBAH DARI "Akun Saya")
              const profileLink = document.createElement('a');
              profileLink.href = `profile.html?uid=${user.uid}`;
              profileLink.classList.add('auth-btn', 'signup-btn'); // Use signup style for visibility
              profileLink.innerHTML = `<i class="fas fa-user-circle"></i> Profil`; // <--- PERUBAHAN DI SINI

              // Tampilkan di Desktop Auth Buttons
              authButtons.appendChild(profileLink);
              authButtons.appendChild(logoutBtn.cloneNode(true));
              authButtons.lastChild.addEventListener('click', showConfirmModal); // Re-attach listener
              
              // Tampilkan di Mobile Auth Buttons
              // Kloning tombol Profil untuk mobile
              const profileLinkMobile = profileLink.cloneNode(true);
              // Kloning tombol Logout untuk mobile (dengan listener terpisah)
              const logoutBtnMobile = logoutBtn.cloneNode(true);
              logoutBtnMobile.addEventListener('click', showConfirmModal);

              // Tampilkan di Mobile Auth Buttons
              authButtonsMobile.appendChild(profileLinkMobile);
              authButtonsMobile.appendChild(logoutBtnMobile);
              
          } else {
              // --- LOGGED OUT STATE ---
              authButtons.innerHTML = `
                <button class="auth-btn login-btn" id="loginBtn">Login</button>
                <button class="auth-btn signup-btn" id="signupBtn">Sign Up</button>
              `;
              // Re-attach listeners for newly created desktop buttons (needed later)
              
              // Clone for mobile
              authButtonsMobile.innerHTML = `
                <button class="auth-btn login-btn" id="loginBtnMobile">Login</button>
                <button class="auth-btn signup-btn" id="signupBtnMobile">Sign Up</button>
              `;
          }
      }

      function toggleMobileMenu() {
          mobileMenu.classList.toggle('open');
          hamburgerBtn.classList.toggle('is-active');
          document.body.style.overflow = mobileMenu.classList.contains('open') ? 'hidden' : 'auto';
          
          // Re-attach listeners for the mobile Auth buttons (both logged in/out state)
          if (mobileMenu.classList.contains('open')) {
            // Re-render auth buttons inside mobile menu to ensure correct state and listeners
            handleAuthClone(auth.currentUser); 

            // Re-attach the login/signup listeners if logged out (cloned elements lose listeners)
            if (!auth.currentUser) {
                // Since the elements are cloned/recreated in handleAuthClone, we need to re-find them
                const loginBtnMobile = document.getElementById('loginBtnMobile');
                const signupBtnMobile = document.getElementById('signupBtnMobile');
                
                if(loginBtnMobile) loginBtnMobile.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleMobileMenu(); // Close mobile menu
                    loginModal.style.display = 'block';
                });
                
                if(signupBtnMobile) signupBtnMobile.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleMobileMenu(); // Close mobile menu
                    signupModal.style.display = 'block';
                    goToStep(1);
                });
            }
          }
      }

      // Main script on DOMContentLoaded
      document.addEventListener("DOMContentLoaded", function () {
        const loginModal = document.getElementById("loginModal");
        const signupModal = document.getElementById("signupModal");
        const userInfoTop = document.getElementById("userInfoTop");
        
        // Setup Mobile Menu Listeners
        hamburgerBtn.addEventListener('click', toggleMobileMenu);
        closeMobileMenu.addEventListener('click', toggleMobileMenu);
        document.querySelectorAll('.mobile-menu-links a').forEach(link => {
            link.addEventListener('click', () => {
                if (mobileMenu.classList.contains('open')) {
                    toggleMobileMenu(); // Close on click inside sidebar
                }
            });
        });

        // Panggil fungsi sinkronisasi utama
        loadEventPopup();
        loadTestimonials(); // Memuat dan mulai rotasi testimoni
        updateRatingDisplay();
        animateCounters();

        // Function to update UI based on auth state
        const updateAuthUI = (user) => {
          isUserLoggedInGlobal = !!user; // Update global login status
          
          // 1. Update/Clone Auth Buttons (Desktop & Mobile Menu)
          handleAuthClone(user);
          
          // 2. Load Operational Status
          loadOperationalStatus(isUserLoggedInGlobal); 

          if (user) {
            // User is signed in
            db.collection("users")
              .doc(user.uid)
              .get()
              .then((doc) => {
                const userData = doc.data() || {};
                const userName =
                  userData.name || user.displayName || user.email.split("@")[0];

                // 3. Update User Info Top Right
                document.getElementById("userNameTop").textContent = userName;
                document.getElementById("userUidTop").textContent = `UID: ${user.uid.substring(0, 4)}...`;
                userInfoTop.style.display = "flex";
                
                // Tambahkan event listener untuk info pengguna
                userInfoTop.addEventListener('click', function() {
                  window.location.href = `profile.html?uid=${user.uid}`;
                });

                // 4. Update Coin
                document.getElementById("sjcoinAmount").textContent =
                  userData.sjcoin || 0;
                document.getElementById("sjcoinDisplay").style.display = "flex";

                // 5. Update badge notifikasi segera
                updateNotificationBadge();
              })
              .catch((error) => {
                console.error("Error getting user data:", error);
              });
          } else {
            // User is signed out
            // Hide SJCoin display and user info
            document.getElementById("sjcoinDisplay").style.display = "none";
            userInfoTop.style.display = "none";

            // Re-attach listeners for desktop auth buttons
            const desktopLoginBtn = document.getElementById("loginBtn");
            const desktopSignupBtn = document.getElementById("signupBtn");
            
            if(desktopLoginBtn) desktopLoginBtn.addEventListener("click", () => {
              loginModal.style.display = "block";
            });
            if(desktopSignupBtn) desktopSignupBtn.addEventListener("click", () => {
              signupModal.style.display = "block";
              goToStep(1);
            });
          }
        };

        // Auth state observer
        auth.onAuthStateChanged(updateAuthUI);

        // Auth modals setup (Switch between modals)
        const switchToSignup = document.getElementById("switchToSignup");
        const switchToLogin = document.getElementById("switchToLogin");

        // Switch between modals
        if(switchToSignup) switchToSignup.addEventListener("click", (e) => {
          e.preventDefault();
          loginModal.style.display = "none";
          signupModal.style.display = "block";
          goToStep(1); // Kembali ke step 1
        });

        if(switchToLogin) switchToLogin.addEventListener("click", (e) => {
          e.preventDefault();
          signupModal.style.display = "none";
          loginModal.style.display = "block";
        });

        // Close modals
        document.querySelectorAll(".auth-modal .close-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            btn.closest(".auth-modal").style.display = "none";
          });
        });

        window.addEventListener("click", (e) => {
          if (e.target.classList.contains("auth-modal")) {
            e.target.style.display = "none";
          }
        });

        // Signup multi-step logic
        const steps = document.querySelectorAll(".step-indicator .step");
        const authSteps = document.querySelectorAll(".auth-step");

        function goToStep(stepNumber) {
          authSteps.forEach((s) => s.classList.remove("active"));
          document
            .querySelector(`#signupStep${stepNumber}`)
            .classList.add("active");

          steps.forEach((s) => {
            s.classList.remove("active", "completed");
            const sNum = parseInt(s.getAttribute("data-step"));
            if (sNum < stepNumber) {
              s.classList.add("completed");
            } else if (sNum === stepNumber) {
              s.classList.add("active");
            }
          });
        }

        document
          .getElementById("signupStep1Btn")
          .addEventListener("click", () => {
            if (!document.getElementById("signupName").value.trim()) {
              window.alert("Nama lengkap harus diisi.");
              return;
            }
            goToStep(2);
          });

        document
          .getElementById("signupBackBtn")
          .addEventListener("click", () => goToStep(1));
        document
          .getElementById("signupStep2Btn")
          .addEventListener("click", () => {
              // Cek validasi sederhana di step 2 (diperlukan untuk navigasi multi-step)
              const address = document.getElementById("signupAddress").value.trim();
              const phone = document.getElementById("signupPhone").value.trim();
              if (!address || !phone) {
                window.alert("Alamat dan Nomor Telepon harus diisi.");
                return;
              }
              goToStep(3);
          });
        document
          .getElementById("signupBackBtn2")
          .addEventListener("click", () => goToStep(2));

        // Handle Signup Submission
        document
          .getElementById("signupSubmitBtn")
          .addEventListener("click", () => {
            const name = document.getElementById("signupName").value;
            const address = document.getElementById("signupAddress").value;
            const phone = document.getElementById("signupPhone").value;
            const email = document.getElementById("signupEmail").value;
            const password = document.getElementById("signupPassword").value;
            const confirmPassword = document.getElementById(
              "signupConfirmPassword"
            ).value;

            if (!email || !name || !address || !phone) {
              window.alert("Semua data harus diisi sebelum mendaftar.");
              return;
            }
            if (password.length < 8) {
              window.alert("Kata sandi minimal 8 karakter.");
              return;
            }
            if (password !== confirmPassword) {
              window.alert("Konfirmasi kata sandi tidak cocok.");
              return;
            }

            const currentTime = new Date().getTime();
            if (currentTime - lastLoginTime < COOLDOWN_TIME) {
              window.alert("Tunggu beberapa saat sebelum mencoba lagi");
              return;
            }

            showLoadingScreen();

            auth
              .createUserWithEmailAndPassword(email, password)
              .then((userCredential) => {
                const user = userCredential.user;
                isFirstSignup = true;

                // Simpan data lengkap ke Firestore
                const userData = {
                  name: name,
                  address: address,
                  phone: phone,
                  email: email,
                  sjcoin: 0,
                  createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                };

                return db
                  .collection("users")
                  .doc(user.uid)
                  .set(userData)
                  .then(() => {
                    hideLoadingScreen();
                    signupModal.style.display = "none";
                    // Tampilkan Konfirmasi Akun (Langkah Baru)
                    showConfirmationModal(userData, isFirstSignup);
                    return user;
                  });
              })
              .catch((error) => {
                hideLoadingScreen();
                const { title, message } = mapErrorToInformal(error);
                showCustomAlert(title, message, true);
                console.error("Signup Error:", error);
              });
          });

        // Handle Login Submission
        document
          .getElementById("loginSubmitBtn")
          .addEventListener("click", () => {
            const email = document.getElementById("loginEmail").value;
            const password = document.getElementById("loginPassword").value;

            if (!email || !password) {
              window.alert("Email dan kata sandi harus diisi.");
              return;
            }

            const currentTime = new Date().getTime();
            if (currentTime - lastLoginTime < COOLDOWN_TIME) {
              window.alert("Tunggu beberapa saat sebelum login lagi");
              return;
            }

            showLoadingScreen();

            auth
              .signInWithEmailAndPassword(email, password)
              .then((userCredential) => {
                const user = userCredential.user;
                lastLoginTime = new Date().getTime();

                // Ambil data user dari Firestore untuk konfirmasi
                return db
                  .collection("users")
                  .doc(user.uid)
                  .get()
                  .then((doc) => {
                    hideLoadingScreen();
                    loginModal.style.display = "none";

                    const userData = doc.data() || {
                      name: user.displayName || user.email.split("@")[0],
                      email: user.email,
                      address: "Belum diisi",
                      phone: "Belum diisi",
                      sjcoin: 0,
                    };

                    // Tampilkan Konfirmasi Akun (Langkah Baru)
                    showConfirmationModal(userData, false);
                  });
              })
              .catch((error) => {
                hideLoadingScreen();
                const { title, message } = mapErrorToInformal(error);
                showCustomAlert(title, message, true);
                console.error("Login Error:", error);
              });
          });

        // --- GOOGLE AUTH ---
        const googleProvider = new firebase.auth.GoogleAuthProvider();

        function handleGoogleAuth(isSignupAttempt) {
          const currentTime = new Date().getTime();
          if (currentTime - lastLoginTime < COOLDOWN_TIME) {
            window.alert("Tunggu beberapa saat sebelum mencoba lagi");
            return;
          }
          showLoadingScreen();

          auth
            .signInWithPopup(googleProvider)
            .then((result) => {
              const user = result.user;
              lastLoginTime = new Date().getTime();

              const userRef = db.collection("users").doc(user.uid);
              return userRef.get().then((doc) => {
                const isNewUser = !doc.exists;

                let userData = {};
                if (isNewUser) {
                  userData = {
                    name: user.displayName,
                    email: user.email,
                    sjcoin: 0,
                    address: "Belum diisi",
                    phone: "Belum diisi",
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                  };

                  userRef.set(userData).then(() => {
                    db.collection("notifications").add({
                      userId: user.uid,
                      title: "Selamat Bergabung!",
                      content: "🥳hore! 50 SJcoin untuk kamu!",
                      timestamp:
                        firebase.firestore.FieldValue.serverTimestamp(),
                      read: false,
                      claimed: false,
                      coinReward: 50,
                    });
                  });
                } else {
                  userData = doc.data();
                }

                hideLoadingScreen();
                loginModal.style.display = "none";
                signupModal.style.display = "none";

                // Tampilkan Konfirmasi Akun (Langkah Baru)
                showConfirmationModal(userData, isNewUser);
              });
            })
            .catch((error) => {
              hideLoadingScreen();
              const { title, message } = mapErrorToInformal(error);
              showCustomAlert(title, message, true);
              console.error("Google Auth Error:", error);
            });
        }

        document
          .getElementById("googleLoginBtn")
          .addEventListener("click", () => handleGoogleAuth(false));
        document
          .getElementById("googleSignupBtn")
          .addEventListener("click", () => handleGoogleAuth(true));

        // --- Password Toggle ---
        function setupPasswordToggle(toggleId, inputId) {
          const toggle = document.getElementById(toggleId);
          const input = document.getElementById(inputId);
          toggle.addEventListener("click", function () {
            const type =
              input.getAttribute("type") === "password" ? "text" : "password";
            input.setAttribute("type", type);
            this.querySelector("i").classList.toggle("fa-eye");
            this.querySelector("i").classList.toggle("fa-eye-slash");
          });
        }
        setupPasswordToggle("toggleLoginPassword", "loginPassword");
        setupPasswordToggle("toggleSignupPassword", "signupPassword");
        setupPasswordToggle(
          "toggleSignupConfirmPassword",
          "signupConfirmPassword"
        );

        // Success button (Menggantikan alur notifikasi popup)
        document
          .getElementById("successButton")
          .addEventListener("click", handleSuccessAction);
          
        // Confirm modal buttons
        document.getElementById('confirmYes').addEventListener('click', () => {
          auth.signOut().then(() => {
            hideConfirmModal();
            window.alert('Anda telah berhasil logout.');
            // Re-render auth buttons on desktop since the event listener was only on the cloned button on mobile menu
            handleAuthClone(null); 
          }).catch(error => {
            console.error('Error signing out:', error);
            window.alert('Gagal untuk logout. Silakan coba lagi.');
          });
        });
        
        document.getElementById('confirmNo').addEventListener('click', hideConfirmModal);
      });
    </script>
  </body>
</html>
